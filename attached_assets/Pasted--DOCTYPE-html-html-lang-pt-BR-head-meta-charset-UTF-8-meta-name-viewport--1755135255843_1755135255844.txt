<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ Interativo - PPGCF UEPB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': {
                            '50': '#eef2ff',
                            '100': '#e0e7ff',
                            '200': '#c7d2fe',
                            '300': '#a5b4fc',
                            '400': '#818cf8',
                            '500': '#6366f1',
                            '600': '#4f46e5',
                            '700': '#4338ca',
                            '800': '#3730a3',
                            '900': '#312e81',
                        },
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .faq-item-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .faq-item.open .faq-item-content {
            max-height: 2000px; /* Adjust as needed */
        }
        .rotate-180 {
            transform: rotate(180deg);
        }
        .transition-all-smooth {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        /* Sidebar mobile styles */
        #sidebar {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="text-slate-700">

    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-slate-200 sticky top-0 z-30">
        <div class="container mx-auto px-4 sm:px-6 py-4">
            <div class="flex items-center space-x-4">
                <div class="bg-primary-600 text-white p-3 rounded-xl shadow-lg shadow-primary-500/30">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div>
                    <h1 class="text-xl sm:text-2xl font-bold text-slate-800">Guia Interativo PPGCF</h1>
                    <p class="text-sm text-slate-500">Baseado na Resolu√ß√£o/UEPB/CONSEPE/008/2023</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4 md:p-6">
        <div class="flex flex-col md:flex-row md:gap-8">
            
            <!-- Sidebar for Topics -->
            <aside id="sidebar" class="fixed md:sticky top-0 md:top-6 h-full w-64 md:w-1/4 lg:w-1/5 bg-white md:bg-transparent border-r md:border-none shadow-lg md:shadow-none p-4 md:p-0 -translate-x-full md:translate-x-0 z-40 transition-all-smooth">
                <div class="flex justify-between items-center mb-4 md:hidden">
                    <h2 class="text-lg font-bold text-slate-800">T√≥picos</h2>
                    <button id="closeSidebarBtn" class="p-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <h2 class="hidden md:block text-lg font-bold mb-4 px-4 text-slate-800">T√≥picos Principais</h2>
                <ul id="topicList" class="space-y-2">
                    <!-- Topics will be injected here by JavaScript -->
                </ul>
            </aside>

            <!-- FAQ Content Area -->
            <div class="flex-1 w-full">
                <!-- Controls: Search and Subtopic Filter -->
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Search Input -->
                        <div>
                            <label for="searchInput" class="block text-sm font-medium text-slate-600 mb-1">Buscar por palavra-chave</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                    <svg class="w-5 h-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                         <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </span>
                                <input type="text" id="searchInput" placeholder="Ex: bolsa, matr√≠cula..." class="w-full p-3 pl-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all-smooth">
                            </div>
                        </div>
                        <!-- Subtopic Filter -->
                        <div>
                            <label for="subtopicFilter" class="block text-sm font-medium text-slate-600 mb-1">Filtrar por Subt√≥pico</label>
                            <select id="subtopicFilter" class="w-full p-3 border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all-smooth">
                                <option value="">Todos os Subt√≥picos</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- FAQ List -->
                <div id="faqContainer" class="space-y-4">
                    <!-- FAQ items will be injected here by JavaScript -->
                </div>
                
                <!-- No results message -->
                <div id="noResults" class="hidden text-center py-16">
                    <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-16 w-16 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <h3 class="mt-4 text-xl font-semibold text-slate-800">Nenhum resultado encontrado</h3>
                    <p class="mt-2 text-md text-slate-500">Tente ajustar sua busca ou filtros.</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Mobile Sidebar Toggle Button -->
    <button id="openSidebarBtn" class="md:hidden fixed bottom-6 right-6 bg-primary-600 text-white p-4 rounded-full shadow-lg z-20 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7" />
        </svg>
    </button>
    <div id="sidebarBackdrop" class="hidden fixed inset-0 bg-black bg-opacity-50 z-30"></div>


    <!-- Footer -->
    <footer class="bg-white mt-16 border-t border-slate-200">
        <div class="container mx-auto px-6 py-6 text-center text-slate-500 text-sm">
            <p>&copy; 2025 PPGCF - Universidade Estadual da Para√≠ba (UEPB). Todos os direitos reservados.</p>
            <p class="mt-1">Este √© um guia n√£o-oficial gerado por IA para fins de consulta. Sempre confirme as informa√ß√µes nos documentos oficiais.</p>
        </div>
    </footer>

    <script>
        // --- DATA ---
        const faqData = [
            { topic: "INGRESSO E ADMISS√ÉO", subtopic: "Processo Seletivo Regular", question: "Como funciona o processo seletivo regular?", answer: "O processo seletivo √© a porta de entrada oficial para o programa, regido por um edital p√∫blico que detalha todas as regras, datas e documentos necess√°rios.", details: [{ icon: 'üìù', category: 'Categoria Principal: Processo Seletivo', points: ["Edital: √â o documento mais importante, publicado com no m√≠nimo 30 dias de anteced√™ncia. Define vagas, crit√©rios, cronograma e documenta√ß√£o.", "Inscri√ß√£o: Geralmente online, exige o preenchimento de formul√°rios e o envio de documentos digitalizados.", "Fluxo Cont√≠nuo: O programa pode optar por um modelo de 'fluxo cont√≠nuo', permitindo inscri√ß√µes em qualquer √©poca do ano, conforme edital."] }], legalBasis: "Art. 79 (Normatiza√ß√£o), Art. 81 (Fluxo Cont√≠nuo), Art. 87 (Comiss√£o de Sele√ß√£o), Art. 88 (Validade do Processo)", documentation: "Requerimento de inscri√ß√£o, Formul√°rio de inscri√ß√£o, C√≥pia do diploma (ou declara√ß√£o), Hist√≥rico escolar, Curr√≠culo Lattes, Comprovante de taxa.", deadlines: "Publica√ß√£o do Edital: M√≠nimo 30 dias antes das inscri√ß√µes. Recursos: Prazo definido no edital, com o Colegiado como primeira inst√¢ncia." },
            { topic: "INGRESSO E ADMISS√ÉO", subtopic: "Matr√≠cula Institucional", question: "Fui aprovado! Como fa√ßo a matr√≠cula institucional?", answer: "A matr√≠cula institucional √© o ato que oficializa seu v√≠nculo com a UEPB. Perder o prazo significa perder a vaga, mesmo tendo sido aprovado.", details: [{ icon: 'üîó', category: 'Categoria Principal: V√≠nculo Acad√™mico', points: ["Procedimento: Realizada na secretaria do programa, dentro do prazo estipulado no calend√°rio acad√™mico.", "Condi√ß√£o: √â um pr√©-requisito para a primeira matr√≠cula em disciplinas.", "Veda√ß√£o: √â proibido manter matr√≠cula simult√¢nea em mais de um curso de p√≥s-gradua√ß√£o stricto sensu na UEPB."] }], legalBasis: "Art. 100 (Obrigatoriedade e Prazos), Art. 101 (Veda√ß√£o de Matr√≠cula Simult√¢nea), Art. 102 (Diplomas Estrangeiros), Art. 103 (Matr√≠cula Semestral)", documentation: "Documentos listados no edital de sele√ß√£o (diploma, hist√≥rico, documentos pessoais, etc.).", deadlines: "Prazo definido no calend√°rio escolar do programa. A n√£o efetiva√ß√£o resulta em perda autom√°tica da vaga (Art. 100, ¬ß4¬∫)." },
            { topic: "INGRESSO E ADMISS√ÉO", subtopic: "Transfer√™ncia", question: "Posso me transferir de outro programa de mestrado/doutorado para o PPGCF?", answer: "Sim, a transfer√™ncia √© poss√≠vel, mas depende da exist√™ncia de vagas, da aprova√ß√£o do Colegiado e do cumprimento de requisitos espec√≠ficos.", details: [{ icon: 'üîÑ', category: 'Categoria Principal: Mobilidade Acad√™mica', points: ["Requisitos: Ser aluno regular de um programa com conceito CAPES igual ou superior, ter cursado no m√≠nimo 6 meses e ter o aceite formal de um orientador do PPGCF.", "Processo: A solicita√ß√£o deve ser aprovada pelos Colegiados de ambos os programas (origem e destino)."] }], legalBasis: "Art. 86, ¬ß1¬∫ (Admiss√£o por Transfer√™ncia), Art. 105 (Condi√ß√µes M√≠nimas)", documentation: "Requerimento formal, Hist√≥rico escolar de origem, Ementas das disciplinas, Carta de aceite do novo orientador, Carta de anu√™ncia do programa de origem.", deadlines: "O tempo de curso j√° cumprido na origem √© contabilizado no prazo m√°ximo. A decis√£o final √© do Colegiado do PPGCF." },
            { topic: "INGRESSO E ADMISS√ÉO", subtopic: "Reingresso", question: "Fui desligado do programa. Posso tentar entrar novamente?", answer: "Sim, mas existe um per√≠odo de car√™ncia obrigat√≥rio. O reingresso n√£o √© autom√°tico e exige a participa√ß√£o em um novo processo seletivo.", details: [{ icon: '‚è≥', category: 'Categoria Principal: Reingresso', points: ["Car√™ncia: √â necess√°rio aguardar um prazo m√≠nimo de 12 meses ap√≥s a data do desligamento para se inscrever em um novo processo seletivo.", "Nova Matr√≠cula: Se aprovado, o reingresso √© considerado uma matr√≠cula nova, sem aproveitamento autom√°tico de cr√©ditos."] }], legalBasis: "Art. 80 (Prazo de Car√™ncia), Art. 112 (Reingresso como Nova Matr√≠cula)", documentation: "A mesma documenta√ß√£o exigida no edital de sele√ß√£o para novos candidatos.", deadlines: "Prazo m√≠nimo de espera de 12 meses. O candidato compete normalmente no novo processo seletivo." },
            { topic: "INGRESSO E ADMISS√ÉO", subtopic: "Aluno Especial", question: "O que √© um 'Aluno Especial' e como funciona?", answer: "Aluno Especial √© aquele que cursa disciplinas isoladas no programa sem ter um v√≠nculo regular. √â uma √≥tima forma de conhecer o programa ou adiantar cr√©ditos.", details: [{ icon: 'üßë‚Äçüè´', category: 'Categoria Principal: Participa√ß√£o Avulsa', points: ["Direitos: Pode frequentar as aulas e receber um certificado de conclus√£o da disciplina.", "Limita√ß√µes: N√£o tem orientador, n√£o pode receber bolsa e n√£o tem os mesmos direitos de um aluno regular.", "Aproveitamento: Cr√©ditos cursados nos √∫ltimos 5 anos podem ser aproveitados se o aluno ingressar como regular."] }], legalBasis: "Art. 75 (Defini√ß√£o), Art. 76 (Regras de Aceita√ß√£o), Arts. 77 e 78 (Possibilidade para alunos de gradua√ß√£o e pesquisadores)", documentation: "Geralmente, diploma de gradua√ß√£o, hist√≥rico, curr√≠culo e carta de interesse.", deadlines: "Inscri√ß√£o conforme calend√°rio acad√™mico. A aceita√ß√£o √© aprovada pelo Colegiado." },
            { topic: "ESTRUTURA E GOVERNAN√áA", subtopic: "Atribui√ß√µes do Colegiado", question: "Quais s√£o as principais responsabilidades do Colegiado?", answer: "O Colegiado √© o √≥rg√£o m√°ximo de delibera√ß√£o do programa. Ele define e aprova todas as normas acad√™micas, pedag√≥gicas e administrativas, sendo a principal inst√¢ncia de recurso para decis√µes da Coordena√ß√£o.", details: [{ icon: 'üèõÔ∏è', category: 'Principais Compet√™ncias', points: ["Propor e aprovar altera√ß√µes no regimento do programa.", "Definir o n√∫mero de vagas e aprovar editais de sele√ß√£o.", "Deliberar sobre aproveitamento de cr√©ditos, transfer√™ncias, trancamentos e desligamentos.", "Designar orientadores, coorientadores e homologar comiss√µes examinadoras (bancas).", "Aprovar o calend√°rio acad√™mico e a oferta de disciplinas para cada per√≠odo."] }], legalBasis: "Art. 30, 31, 32", documentation: "Atas de reuni√£o do Colegiado.", deadlines: "As decis√µes s√£o tomadas em reuni√µes regulares (pelo menos uma vez por m√™s) ou extraordin√°rias." },
            { topic: "ESTRUTURA E GOVERNAN√áA", subtopic: "Atribui√ß√µes da Coordena√ß√£o", question: "Quais s√£o as fun√ß√µes da Coordena√ß√£o do Programa?", answer: "A Coordena√ß√£o √© o √≥rg√£o executivo que administra o dia a dia do programa. Ela executa as decis√µes do Colegiado, representa o programa e garante o cumprimento de todas as normas e prazos.", details: [{ icon: 'üßë‚Äçüíº', category: 'Principais Fun√ß√µes', points: ["Presidir as reuni√µes do Colegiado e executar suas decis√µes.", "Elaborar e enviar os relat√≥rios para a CAPES (Plataforma Sucupira).", "Gerenciar a aplica√ß√£o de recursos financeiros (como o PROAP).", "Organizar o calend√°rio acad√™mico e fiscalizar o cumprimento das atividades.", "Tomar decis√µes urgentes 'ad referendum', que devem ser ratificadas pelo Colegiado na reuni√£o seguinte."] }], legalBasis: "Art. 33, 34, 35", documentation: "Relat√≥rios anuais, planos de aplica√ß√£o de recursos, editais.", deadlines: "Respons√°vel por cumprir os prazos estabelecidos pela CAPES e pela UEPB." },
            { topic: "ESTRUTURA E GOVERNAN√áA", subtopic: "Atribui√ß√µes da Secretaria", question: "Qual o papel da Secretaria do Programa?", answer: "A Secretaria √© o √≥rg√£o de apoio administrativo que executa as fun√ß√µes burocr√°ticas e de controle acad√™mico. √â o principal ponto de contato para discentes e docentes para quest√µes documentais e de rotina.", details: [{ icon: 'üóó', category: 'Principais Tarefas', points: ["Organizar e processar inscri√ß√µes, matr√≠culas e outros requerimentos.", "Manter atualizados os arquivos, cadastros e hist√≥ricos de discentes e docentes.", "Secretariar reuni√µes do Colegiado, defesas e exames de qualifica√ß√£o.", "Controlar a tramita√ß√£o de correspond√™ncias e documentos oficiais do programa."] }], legalBasis: "Art. 36, 37", documentation: "Processos de matr√≠cula, hist√≥ricos escolares, arquivos de trabalhos finais.", deadlines: "Atua√ß√£o cont√≠nua para garantir o bom funcionamento administrativo." },
            { topic: "CORPO DOCENTE", subtopic: "Credenciamento e Categorias", question: "Como um professor se torna parte do corpo docente do programa?", answer: "Um professor ou pesquisador com t√≠tulo de doutor pode ser autorizado a participar do programa (credenciado) em uma de tr√™s categorias: Permanente, Visitante ou Colaborador, ap√≥s aprova√ß√£o pelo Colegiado.", details: [{ icon: 'üßë‚Äçüè´', category: 'Categorias Docentes', points: ["Permanente: N√∫cleo principal do programa, com atua√ß√£o cont√≠nua em ensino, pesquisa e orienta√ß√£o.", "Visitante: Docente externo contratado por tempo determinado para colaborar com o programa.", "Colaborador: Participa de forma complementar em projetos, aulas ou orienta√ß√µes, sem os mesmos v√≠nculos do docente permanente."] }], legalBasis: "Art. 43, 44, 45, 46, 49", documentation: "Edital de credenciamento, Curr√≠culo Lattes, projeto de pesquisa.", deadlines: "O credenciamento ocorre periodicamente, conforme editais publicados pelo programa." },
            { topic: "CORPO DOCENTE", subtopic: "Deveres do Orientador", question: "Quais s√£o as principais responsabilidades do meu orientador?", answer: "O orientador √© respons√°vel por guiar o discente em toda a sua trajet√≥ria acad√™mica, desde o planejamento dos estudos e escolha de disciplinas at√© a elabora√ß√£o e defesa do trabalho final.", details: [{ icon: 'üß≠', category: 'Principais Atribui√ß√µes', points: ["Assistir o orientando no planejamento acad√™mico e na matr√≠cula.", "Acompanhar e avaliar o desempenho do discente.", "Auxiliar na prepara√ß√£o do projeto e do trabalho final.", "Propor o desligamento do orientando em caso de n√£o cumprimento das atividades.", "Sugerir nomes para bancas e autorizar a defesa do trabalho final."] }], legalBasis: "Art. 69", documentation: "Relat√≥rios de desempenho, pareceres em solicita√ß√µes do discente.", deadlines: "Acompanhamento cont√≠nuo durante todo o curso do orientando." },
            { topic: "QUEST√ïES FINANCEIRAS", subtopic: "Bolsas de Estudo", question: "Como funciona a concess√£o de bolsas de estudo?", answer: "As bolsas n√£o s√£o autom√°ticas e dependem da disponibilidade de cotas das ag√™ncias de fomento (como a CAPES). A sele√ß√£o √© baseada no m√©rito acad√™mico.", details: [{ icon: 'üí∞', category: 'Categoria Principal: Fomento e Aux√≠lio', points: ["Comiss√£o de Bolsas: Cada programa possui uma comiss√£o respons√°vel por definir os crit√©rios de sele√ß√£o e acompanhar os bolsistas.", "Crit√©rios de Sele√ß√£o: Priorizam o m√©rito acad√™mico, geralmente baseado na classifica√ß√£o do processo seletivo.", "Renova√ß√£o: A bolsa √© concedida por 12 meses, renov√°vel anualmente at√© o limite do curso, mediante bom desempenho."] }], legalBasis: "Art. 167 (Comiss√£o de Bolsas), Art. 168 (Requisitos), Art. 169 (Renova√ß√£o)", documentation: "Documentos que comprovem aus√™ncia de v√≠nculo empregat√≠cio remunerado, Termo de compromisso da ag√™ncia de fomento.", deadlines: "Sele√ß√£o realizada pela Comiss√£o de Bolsas ap√≥s o resultado do processo seletivo de ingresso." },
            { topic: "QUEST√ïES FINANCEIRAS", subtopic: "Dedica√ß√£o Exclusiva", question: "Posso trabalhar e receber bolsa ao mesmo tempo?", answer: "N√£o. A bolsa de estudos exige dedica√ß√£o integral √†s atividades do programa.", details: [{ icon: 'üö´', category: 'Categoria Principal: Veda√ß√µes e Regras', points: ["Dedica√ß√£o Exclusiva: O bolsista deve ter dedica√ß√£o integral ao curso, o que impede o ac√∫mulo com atividades profissionais remuneradas.", "Exce√ß√µes: A pr√≥pria ag√™ncia de fomento pode prever exce√ß√µes espec√≠ficas em seus regulamentos.", "Consequ√™ncias: O descumprimento leva ao cancelamento da bolsa e √† obriga√ß√£o de ressarcir os valores recebidos."] }], legalBasis: "Art. 168, incisos II e IV (Exig√™ncia de Dedica√ß√£o Integral)", documentation: "Declara√ß√£o de n√£o ac√∫mulo de bolsas e de aus√™ncia de v√≠nculo empregat√≠cio.", deadlines: "O aluno √© respons√°vel por manter sua condi√ß√£o de dedica√ß√£o exclusiva e informar qualquer altera√ß√£o √† coordena√ß√£o." },
            { topic: "VIDA ACAD√äMICA", subtopic: "Cr√©ditos M√≠nimos", question: "Quantos cr√©ditos preciso para concluir o curso?", answer: "O programa exige um n√∫mero m√≠nimo de cr√©ditos em disciplinas, que devem ser integralizados dentro do prazo do curso.", details: [{ icon: 'üìä', category: 'Categoria Principal: Estrutura Curricular', points: ["Mestrado: M√≠nimo de 18 cr√©ditos.", "Doutorado: M√≠nimo de 27 cr√©ditos.", "Defini√ß√£o de Cr√©dito: 1 cr√©dito = 15h de aula te√≥rica ou 30h de aula pr√°tica.", "Observa√ß√£o: Cr√©ditos da disserta√ß√£o/tese n√£o entram nesta contagem."] }], legalBasis: "Art. 115 (Limites M√≠nimos de Cr√©ditos)", documentation: "O controle √© feito via hist√≥rico escolar.", deadlines: "Os cr√©ditos devem ser cumpridos dentro do prazo m√°ximo do curso. O aluno e o orientador s√£o respons√°veis pelo planejamento." },
            { topic: "VIDA ACAD√äMICA", subtopic: "Avalia√ß√£o e Aprova√ß√£o", question: "Como funciona a avalia√ß√£o nas disciplinas?", answer: "A aprova√ß√£o em uma disciplina depende de nota e frequ√™ncia m√≠nimas.", details: [{ icon: '‚úÖ', category: 'Categoria Principal: Desempenho Acad√™mico', points: ["Nota M√≠nima: Aprova√ß√£o exige nota igual ou superior a 7,0 (Conceito C).", "Frequ√™ncia M√≠nima: √â obrigat√≥ria a presen√ßa em, no m√≠nimo, 75% das aulas.", "CRE (Coeficiente de Rendimento Escolar): Manter o CRE acima de 7,0 √© condi√ß√£o para a perman√™ncia no programa."] }], legalBasis: "Art. 125 (Sistema de Notas), Art. 126 (Frequ√™ncia M√≠nima), Art. 110, inciso VI (Desligamento por CRE baixo)", documentation: "N√£o se aplica.", deadlines: "O professor tem at√© 30 dias ap√≥s o t√©rmino da disciplina para lan√ßar as notas. Reprovar 2x na mesma disciplina ou ter CRE < 7,0 leva ao desligamento." },
            { topic: "VIDA ACAD√äMICA", subtopic: "Est√°gio de Doc√™ncia", question: "O Est√°gio de Doc√™ncia √© obrigat√≥rio?", answer: "Sim, o est√°gio de doc√™ncia √© uma atividade acad√™mica obrigat√≥ria para bolsistas, visando a forma√ß√£o para o ensino superior. Discentes que j√° s√£o professores podem solicitar a dispensa da atividade.", details: [{ icon: 'üë®‚Äçüè´', category: 'Detalhes do Est√°gio', points: ["√â obrigat√≥rio para discentes bolsistas.", "Mestrandos devem cursar por um semestre; doutorandos por dois semestres.", "As atividades s√£o supervisionadas pelo orientador e por um professor da gradua√ß√£o.", "Ao final, o discente deve elaborar um relat√≥rio para obter os cr√©ditos."] }], legalBasis: "Art. 118", documentation: "Relat√≥rio de atividades do est√°gio.", deadlines: "Deve ser cumprido dentro do prazo regular do curso." },
            { topic: "VIDA ACAD√äMICA", subtopic: "Aproveitamento de Estudos", question: "Posso aproveitar cr√©ditos de outros cursos de p√≥s-gradua√ß√£o?", answer: "Sim, o Colegiado pode aceitar cr√©ditos de disciplinas cursadas em outros programas de p√≥s-gradua√ß√£o (stricto ou lato sensu), desde que tenham sido conclu√≠das nos √∫ltimos 5 anos e sejam relevantes para sua forma√ß√£o.", details: [{ icon: 'üìö', category: 'Regras para Aproveitamento', points: ["O componente curricular deve ter sido conclu√≠do h√°, no m√°ximo, 5 anos.", "A nota obtida deve ser igual ou superior a 7,0 (ou conceito C).", "O n√∫mero m√°ximo de cr√©ditos a serem aproveitados √© definido no regimento de cada programa.", "√â necess√°rio apresentar requerimento com hist√≥rico escolar e ementas das disciplinas."] }], legalBasis: "Art. 129, Art. 130", documentation: "Requerimento formal, hist√≥rico escolar e ementas das disciplinas cursadas.", deadlines: "A solicita√ß√£o deve ser feita formalmente √† coordena√ß√£o do programa." },
            { topic: "PRAZOS E SITUA√á√ïES ESPECIAIS", subtopic: "Prazos do Curso", question: "Qual o prazo m√°ximo para concluir o mestrado/doutorado?", answer: "O regimento estabelece prazos m√≠nimos e m√°ximos para a conclus√£o do curso, contados a partir da data da primeira matr√≠cula.", details: [{ icon: '‚è≥', category: 'Categoria Principal: Prazos Regimentais', points: ["Mestrado: M√≠nimo de 1 ano e m√°ximo de 2 anos e 6 meses (30 meses).", "Doutorado: M√≠nimo de 2 anos e m√°ximo de 5 anos (60 meses).", "Prorroga√ß√£o: Em casos excepcionais, o Colegiado pode conceder uma prorroga√ß√£o de at√© 6 meses (mestrado) ou 12 meses (doutorado)."] }], legalBasis: "Art. 113 (Prazos), Art. 114 (Prorroga√ß√£o)", documentation: "Para prorroga√ß√£o: Requerimento formal, justificativa, parecer do orientador, vers√£o preliminar do trabalho, cronograma.", deadlines: "A solicita√ß√£o de prorroga√ß√£o deve ser feita ANTES do vencimento do prazo regular. A decis√£o √© do Colegiado." },
            { topic: "PRAZOS E SITUA√á√ïES ESPECIAIS", subtopic: "Trancamento Geral", question: "Posso trancar o curso por um tempo?", answer: "Sim, √© poss√≠vel solicitar a 'Interrup√ß√£o de Estudos' (trancamento geral), mas apenas por motivos espec√≠ficos e por um per√≠odo limitado.", details: [{ icon: '‚è∏Ô∏è', category: 'Categoria Principal: Interrup√ß√£o de Estudos', points: ["Motivos Aceitos: Viagem de trabalho, doen√ßa comprovada ou licen√ßa maternidade.", "Prazos de Trancamento: Mestrado (1 per√≠odo letivo), Doutorado (at√© 2 per√≠odos).", "Efeito: O per√≠odo trancado n√£o √© contado no tempo total do curso.", "Bolsa: A bolsa √© suspensa durante a interrup√ß√£o (exceto licen√ßa maternidade)."] }], legalBasis: "Art. 107 (Regras para Interrup√ß√£o de Estudos)", documentation: "Requerimento formal, documentos comprobat√≥rios, parecer do orientador.", deadlines: "A solicita√ß√£o deve ser feita antes ou durante o per√≠odo a ser trancado. A decis√£o √© do Colegiado." },
            { topic: "ORIENTA√á√ÉO", subtopic: "Defini√ß√£o e Troca de Orientador", question: "Como funciona a defini√ß√£o e a troca de orientador?", answer: "Todo aluno tem direito a um orientador, que √© formalizado pelo Colegiado. A troca √© poss√≠vel, mas √© um processo que requer acordo e aprova√ß√£o.", details: [{ icon: 'ü§ù', category: 'Categoria Principal: Rela√ß√£o Orientador-Orientando', points: ["Defini√ß√£o: Designado pelo Colegiado, com base na indica√ß√£o do aluno e afinidade de pesquisa.", "Mudan√ßa pelo Aluno: O aluno pode solicitar a troca, com anu√™ncia do orientador atual e do novo.", "Conflito: Em caso de discord√¢ncia, a decis√£o final sobre a troca cabe ao Colegiado."] }], legalBasis: "Art. 65 (Defini√ß√£o), Art. 66 (Mudan√ßa pelo Discente), Art. 32, inciso XXI (Atribui√ß√£o do Colegiado)", documentation: "Para troca: Requerimento formal, justificativa, carta de anu√™ncia/aceite.", deadlines: "O Colegiado tem at√© 30 dias para designar um novo orientador em caso de vac√¢ncia." },
            { topic: "ORIENTA√á√ÉO", subtopic: "Defini√ß√£o e Troca de Orientador", question: "Um orientador pode deixar de me orientar?", answer: "Sim, um orientador pode solicitar ao Colegiado o direito de abdicar da orienta√ß√£o de um discente. Isso deve ser feito atrav√©s de uma justificativa formal e circunstanciada, baseada nos relat√≥rios de desempenho do aluno.", details: [{ icon: 'üëã', category: 'Abdica√ß√£o da Orienta√ß√£o', points: ["Direito do Orientador: √â facultado ao orientador o direito de abdicar da orienta√ß√£o.", "Justificativa: A solicita√ß√£o deve ser formal e bem fundamentada.", "Aprova√ß√£o: O pedido precisa ser submetido e aprovado pelo Colegiado do programa.", "Novo Orientador: Em caso de aprova√ß√£o, o Colegiado designar√° um novo orientador em at√© 30 dias."] }], legalBasis: "Art. 67 (Abdica√ß√£o pelo Orientador), Art. 68 (Tutela da Coordena√ß√£o)", documentation: "Justificativa formal do orientador.", deadlines: "A decis√£o final √© do Colegiado." },
            { topic: "DEFESA E DIPLOMA√á√ÉO", subtopic: "Exame de Qualifica√ß√£o", question: "O que √© o Exame de Qualifica√ß√£o?", answer: "O exame de qualifica√ß√£o (ou pr√©-banca) √© uma etapa obrigat√≥ria para o doutorado que avalia a capacidade do discente de realizar uma pesquisa original. √â um marco importante que antecede a defesa final da tese.", details: [{ icon: 'üßê', category: 'Processo de Qualifica√ß√£o', points: ["Objetivo: Avaliar a maturidade da pesquisa e a capacidade do discente.", "Obrigatoriedade: √â obrigat√≥rio para o Doutorado e pode ser exigido no Mestrado, conforme o regimento do programa.", "Banca: Composta por no m√≠nimo tr√™s doutores, aprovada pelo Colegiado.", "Resultado: O discente pode ser 'Aprovado' ou 'Reprovado'. Em caso de reprova√ß√£o, h√° uma √∫nica chance de repetir o exame."] }], legalBasis: "Art. 147, 148, 149, 150", documentation: "Vers√£o do trabalho para a banca, requerimento de agendamento.", deadlines: "O prazo para a segunda tentativa √© de at√© 120 dias (Doutorado) ou 60 dias (Mestrado) ap√≥s a primeira." },
            { topic: "DEFESA E DIPLOMA√á√ÉO", subtopic: "Requisitos para Defesa", question: "O que preciso fazer para poder defender minha disserta√ß√£o/tese?", answer: "Para marcar a defesa, √© preciso ter cumprido uma s√©rie de requisitos acad√™micos e administrativos, formando um checklist obrigat√≥rio.", details: [{ icon: 'üèÅ', category: 'Categoria Principal: Conclus√£o de Curso', points: ["Checklist: Cr√©ditos integralizados, aprova√ß√£o na qualifica√ß√£o, profici√™ncia em l√≠ngua estrangeira, est√°gio doc√™ncia cumprido, declara√ß√£o de n√£o pl√°gio e recomenda√ß√£o do orientador."] }], legalBasis: "Art. 151 (Requisitos para a Defesa)", documentation: "Requerimento de agendamento, autoriza√ß√£o do orientador, vers√£o do trabalho para a banca, sugest√£o de nomes para a comiss√£o, comprovantes de todos os requisitos.", deadlines: "O Colegiado tem at√© 30 dias para homologar a banca, e a defesa deve ser marcada em at√© 30 dias ap√≥s a homologa√ß√£o." },
            { topic: "DEFESA E DIPLOMA√á√ÉO", subtopic: "Banca e Resultados", question: "Como funciona a banca de defesa e quais os poss√≠veis resultados?", answer: "A defesa √© uma sess√£o p√∫blica julgada por uma comiss√£o de especialistas. O resultado pode ser aprova√ß√£o, aprova√ß√£o com corre√ß√µes ou reprova√ß√£o.", details: [{ icon: 'üßë‚Äç‚öñÔ∏è', category: 'Categoria Principal: Banca Examinadora', points: ["Composi√ß√£o (Mestrado): Orientador + 2 especialistas (1 externo).", "Composi√ß√£o (Doutorado): Orientador + 4 especialistas (2 externos, 1 de outra institui√ß√£o).", "Resultados: Aprovado(a), Insuficiente (com prazo para corre√ß√µes), Reprovado(a) (leva ao desligamento)."] }], legalBasis: "Art. 156 (Composi√ß√£o da Banca), Art. 157 (Resultados)", documentation: "Ata da sess√£o de defesa p√∫blica.", deadlines: "Prazo para corre√ß√µes (se 'Insuficiente'): 90 dias (Mestrado) ou 180 dias (Doutorado)." },
            { topic: "DEFESA E DIPLOMA√á√ÉO", subtopic: "Diploma√ß√£o", question: "Fui aprovado! Como fa√ßo para solicitar o diploma?", answer: "Ap√≥s a aprova√ß√£o e a realiza√ß√£o das corre√ß√µes, √© preciso depositar a vers√£o final do trabalho no reposit√≥rio da UEPB e, ent√£o, solicitar formalmente a expedi√ß√£o do diploma.", details: [{ icon: 'üìú', category: 'Categoria Principal: Diploma√ß√£o', points: ["Dep√≥sito Final: A vers√£o final corrigida (PDF/A com ficha catalogr√°fica) deve ser depositada no Reposit√≥rio Institucional em at√© 30 dias ap√≥s a defesa.", "Solicita√ß√£o do Diploma: O processo √© aberto pelo aluno junto √† PRPGP, com toda a documenta√ß√£o comprobat√≥ria."] }], legalBasis: "Art. 159 (Dep√≥sito Final), Art. 162 (Requisitos para Outorga), Art. 163 (Documenta√ß√£o para Expedi√ß√£o)", documentation: "Requerimento padr√£o, Ata da defesa, C√≥pia do diploma anterior, Documentos pessoais, Comprovante de dep√≥sito, Declara√ß√£o de quita√ß√£o da biblioteca, Declara√ß√£o e hist√≥rico de conclus√£o.", deadlines: "Prazo para Dep√≥sito: 30 dias ap√≥s a defesa (prorrog√°vel por mais 15). A expedi√ß√£o do diploma √© de responsabilidade da PRPGP." },
            { topic: "SITUA√á√ïES PROBLEM√ÅTICAS", subtopic: "Desligamento", question: "Em quais situa√ß√µes posso ser desligado do programa?", answer: "O desligamento √© autom√°tico em casos de desempenho acad√™mico insuficiente, descumprimento de prazos ou infra√ß√µes graves, como pl√°gio.", details: [{ icon: '‚ùå', category: 'Categoria Principal: Desligamento', points: ["Causas: Reprovar 2x na mesma disciplina, n√£o ser aprovado na profici√™ncia, n√£o se matricular, reprovar 2x na qualifica√ß√£o, esgotar o prazo, ter CRE < 7,0, ser reprovado na defesa, ou pl√°gio."] }], legalBasis: "Art. 110 (Causas de Desligamento), Art. 111 (Abandono)", documentation: "O processo √© administrativo, iniciado pela Coordena√ß√£o.", deadlines: "O aluno pode recorrer da decis√£o de desligamento, sendo o Colegiado a primeira inst√¢ncia." },
            { topic: "DIREITOS E GOVERNAN√áA", subtopic: "Propriedade Intelectual", question: "Quem √© o dono da minha pesquisa? Posso pedir sigilo?", answer: "Os resultados da pesquisa s√£o de propriedade da UEPB, mas os direitos autorais s√£o resguardados. Sim, voc√™ pode e deve solicitar sigilo se planeja publicar ou patentear.", details: [{ icon: 'üí°', category: 'Categoria Principal: Propriedade Intelectual', points: ["Propriedade: Os resultados s√£o da UEPB, mas a divulga√ß√£o deve sempre mencionar a universidade, o orientador e o discente.", "Sigilo: Voc√™ tem o direito de solicitar um prazo de sigilo de at√© 1 ano para a divulga√ß√£o do seu trabalho no reposit√≥rio.", "Processo: A solicita√ß√£o de sigilo √© feita no momento do dep√≥sito final do trabalho."] }], legalBasis: "Art. 187 (Divulga√ß√£o e Sigilo), Art. 188 (Propriedade dos Resultados)", documentation: "Formul√°rio de autoriza√ß√£o de dep√≥sito, com a op√ß√£o de embargo/sigilo marcada.", deadlines: "Prazo de Sigilo: At√© 1 ano, podendo ser ampliado. A solicita√ß√£o √© feita no ato do dep√≥sito." },
            { topic: "DIREITOS E GOVERNAN√áA", subtopic: "Regras de Transi√ß√£o", question: "Como funcionam as regras de transi√ß√£o para o novo regimento?", answer: "Para discentes que ingressaram at√© o segundo per√≠odo letivo de 2023, aplicam-se as disposi√ß√µes do regimento anterior. Esta nova resolu√ß√£o vale para os ingressantes a partir de sua publica√ß√£o.", details: [{ icon: 'üìú', category: 'Categoria Principal: Normas Aplic√°veis', points: ["Marco Temporal: A data de ingresso no curso define qual regimento se aplica ao aluno.", "Regra Anterior: Alunos ingressantes at√© 2023.2 seguem o regimento antigo.", "Regra Nova: Alunos ingressantes ap√≥s a publica√ß√£o desta resolu√ß√£o seguem as novas regras."] }], legalBasis: "Art. 189", documentation: "N√£o se aplica documenta√ß√£o espec√≠fica, a regra √© aplicada automaticamente pela secretaria.", deadlines: "A regra de transi√ß√£o √© permanente para as turmas especificadas." },
            { topic: "DIREITOS E GOVERNAN√áA", subtopic: "Passagem Direta Mestrado-Doutorado", question: "√â poss√≠vel passar do mestrado para o doutorado diretamente (fast track)?", answer: "Sim, os programas podem prever a passagem de alunos do mestrado para o doutorado sem a necessidade de um novo processo seletivo p√∫blico, contanto que crit√©rios de excel√™ncia sejam atendidos.", details: [{ icon: 'üöÄ', category: 'Categoria Principal: Mobilidade Acad√™mica Avan√ßada', points: ["Condi√ß√£o: O regimento do programa deve prever e detalhar essa possibilidade.", "Crit√©rios: O aluno deve demonstrar desempenho excepcional, produ√ß√£o acad√™mica qualificada e ter um plano de trabalho consistente para o doutorado.", "Avalia√ß√£o: A passagem depende de uma avalia√ß√£o rigorosa por uma comiss√£o designada pelo Colegiado."] }], legalBasis: "Art. 104", documentation: "Requerimento formal, hist√≥rico escolar, curr√≠culo Lattes atualizado, produ√ß√£o cient√≠fica, plano de trabalho para o doutorado, carta de recomenda√ß√£o do orientador.", deadlines: "A solicita√ß√£o deve ser feita em um prazo definido pelo regimento do programa, geralmente ap√≥s a qualifica√ß√£o do mestrado." },
            { topic: "DIREITOS E GOVERNAN√áA", subtopic: "Deveres do Discente", question: "Quais s√£o os principais deveres do aluno de p√≥s-gradua√ß√£o?", answer: "Al√©m do respeito √†s normas da UEPB, o aluno deve cumprir o plano de estudos, manter o orientador informado, participar das atividades, realizar o est√°gio de doc√™ncia e submeter projetos ao Comit√™ de √âtica quando necess√°rio.", details: [{ icon: 'üìã', category: 'Categoria Principal: Responsabilidades Acad√™micas', points: ["Zelar pelo nome da institui√ß√£o e cumprir o regimento.", "Manter seus dados cadastrais e curriculares atualizados.", "Dedicar-se √†s atividades do curso e cumprir os prazos.", "Cumprir o Est√°gio de Doc√™ncia (obrigat√≥rio para bolsistas).", "Observar as diretrizes do Comit√™ de √âtica em Pesquisa."] }], legalBasis: "Art. 74", documentation: "Comprovantes de submiss√£o ao Comit√™ de √âtica, relat√≥rios de est√°gio de doc√™ncia, etc., conforme exigido pelo programa.", deadlines: "Os deveres devem ser cumpridos ao longo de todo o curso." },
            { topic: "DIREITOS E GOVERNAN√áA", subtopic: "Representa√ß√£o Discente", question: "Como funciona a representa√ß√£o dos alunos no Colegiado?", answer: "Os alunos (discentes) t√™m direito a uma representa√ß√£o no Colegiado do programa, com direito a voz e voto, garantindo sua participa√ß√£o nas decis√µes. O mandato √© de 1 ano, permitida uma recondu√ß√£o.", details: [{ icon: 'üó£Ô∏è', category: 'Categoria Principal: Governan√ßa e Participa√ß√£o', points: ["Composi√ß√£o: O Colegiado inclui representantes dos alunos, eleitos por seus pares.", "Mandato: O mandato do representante discente √© de 1 (um) ano.", "Recondu√ß√£o: √â permitida uma recondu√ß√£o para um segundo mandato.", "Voz e Voto: Os representantes participam ativamente das reuni√µes e delibera√ß√µes."] }], legalBasis: "Art. 31, inciso III e ¬ß3¬∫", documentation: "A elei√ß√£o √© organizada pelos pr√≥prios alunos e formalizada junto √† coordena√ß√£o do programa.", deadlines: "O mandato √© de 1 ano, com elei√ß√µes peri√≥dicas para a escolha dos representantes." }
        ];

        // --- DOM ELEMENTS ---
        const faqContainer = document.getElementById('faqContainer');
        const searchInput = document.getElementById('searchInput');
        const subtopicFilter = document.getElementById('subtopicFilter');
        const topicList = document.getElementById('topicList');
        const noResults = document.getElementById('noResults');
        const openSidebarBtn = document.getElementById('openSidebarBtn');
        const closeSidebarBtn = document.getElementById('closeSidebarBtn');
        const sidebar = document.getElementById('sidebar');
        const sidebarBackdrop = document.getElementById('sidebarBackdrop');


        // --- STATE ---
        let activeTopic = '';

        // --- ICONS for Sidebar ---
        const topicIcons = {
            "INGRESSO E ADMISS√ÉO": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1" /></svg>`,
            "ESTRUTURA E GOVERNAN√áA": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>`,
            "CORPO DOCENTE": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-2a4 4 0 00-4-4H9a4 4 0 00-4 4v2" /></svg>`,
            "QUEST√ïES FINANCEIRAS": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" /></svg>`,
            "VIDA ACAD√äMICA": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M12 14l9-5-9-5-9 5 9 5z" /><path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-9.998 12.078 12.078 0 01.665-6.479L12 14z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-9.998 12.078 12.078 0 01.665-6.479L12 14z" /></svg>`,
            "PRAZOS E SITUA√á√ïES ESPECIAIS": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>`,
            "ORIENTA√á√ÉO": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>`,
            "DEFESA E DIPLOMA√á√ÉO": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" /></svg>`,
            "SITUA√á√ïES PROBLEM√ÅTICAS": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" /></svg>`,
            "DIREITOS E GOVERNAN√áA": `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12l-9-9-9 9M3 10v10a2 2 0 002 2h14a2 2 0 002-2V10M12 16v-4" /></svg>`,
        };

        // --- FUNCTIONS ---

        /**
         * Populates the subtopic filter dropdown and the topic sidebar.
         */
        function populateFiltersAndSidebar() {
            const topics = [...new Set(faqData.map(item => item.topic))];
            
            // Populate Subtopic Filter based on all data
            const allSubtopics = [...new Set(faqData.map(item => item.subtopic))];
            subtopicFilter.innerHTML = '<option value="">Todos os Subt√≥picos</option>'; // Reset
            allSubtopics.sort().forEach(subtopic => {
                const option = document.createElement('option');
                option.value = subtopic;
                option.textContent = subtopic;
                subtopicFilter.appendChild(option);
            });

            // Populate Topic Sidebar
            topicList.innerHTML = ''; // Clear existing
            
            // Add "All Topics" item
            const allTopicsItem = document.createElement('li');
            allTopicsItem.className = 'topic-list-item flex items-center space-x-3 p-3 rounded-lg font-semibold text-slate-600 transition-all-smooth hover:bg-slate-200 active';
            allTopicsItem.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" /></svg><span>Todos os T√≥picos</span>`;
            allTopicsItem.dataset.topic = '';
            topicList.appendChild(allTopicsItem);

            // Add individual topic items
            topics.sort().forEach(topic => {
                const listItem = document.createElement('li');
                listItem.className = 'topic-list-item flex items-center space-x-3 p-3 rounded-lg font-semibold text-slate-600 transition-all-smooth hover:bg-slate-200';
                listItem.innerHTML = `${topicIcons[topic] || ''}<span>${topic}</span>`;
                listItem.dataset.topic = topic;
                topicList.appendChild(listItem);
            });

            // Add event listener for the whole list
            topicList.addEventListener('click', (e) => {
                const clickedItem = e.target.closest('li.topic-list-item');
                if (clickedItem) {
                    topicList.querySelectorAll('li').forEach(li => li.classList.remove('active', 'bg-primary-100', 'text-primary-700'));
                    clickedItem.classList.add('active', 'bg-primary-100', 'text-primary-700');
                    activeTopic = clickedItem.dataset.topic;
                    applyFilters();
                    // Close sidebar on mobile after selection
                    if (window.innerWidth < 768) {
                        closeSidebar();
                    }
                }
            });
        }

        /**
         * Renders the FAQ items on the page.
         * @param {Array} items - The array of FAQ items to display.
         */
        function renderFAQ(items) {
            faqContainer.innerHTML = '';
            if (items.length === 0) {
                noResults.classList.remove('hidden');
                return;
            }
            noResults.classList.add('hidden');

            items.forEach(item => {
                const detailsHtml = item.details.map(detail => `
                    <div class="flex items-start space-x-4 mt-4">
                        <span class="text-2xl pt-1">${detail.icon}</span>
                        <div>
                            <h4 class="font-semibold text-slate-700">${detail.category}</h4>
                            <ul class="list-disc list-inside mt-2 space-y-1.5 text-slate-600">
                                ${detail.points.map(point => `<li>${point}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `).join('');

                const faqItem = document.createElement('div');
                faqItem.className = 'faq-item bg-white rounded-xl shadow-md border border-slate-200 overflow-hidden transition-all-smooth hover:shadow-lg hover:-translate-y-1';
                faqItem.innerHTML = `
                    <div class="faq-item-header flex justify-between items-center p-5 cursor-pointer">
                        <div class="flex-1">
                            <h3 class="font-semibold text-lg text-primary-700">${item.question}</h3>
                            <div class="flex items-center space-x-2 mt-2 text-xs text-slate-500 flex-wrap">
                                <span class="bg-primary-100 text-primary-800 px-2.5 py-1 rounded-full font-medium mt-1">${item.topic}</span>
                                <span class="bg-slate-100 text-slate-800 px-2.5 py-1 rounded-full font-medium mt-1">${item.subtopic}</span>
                            </div>
                        </div>
                        <svg class="w-6 h-6 text-slate-500 transition-transform chevron-icon flex-shrink-0 ml-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="faq-item-content">
                        <div class="px-5 pb-5">
                            <div class="prose prose-slate max-w-none border-t border-slate-200 pt-4">
                                <p class="text-slate-600 mb-5">${item.answer}</p>
                                ${detailsHtml}
                                <div class="mt-6 space-y-4 bg-slate-50 p-4 rounded-lg border border-slate-200">
                                    <div class="flex items-start space-x-3">
                                        <div class="flex-shrink-0 pt-1"><svg class="w-6 h-6 text-primary-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg></div>
                                        <div><h5 class="font-semibold text-slate-800">Base Legal</h5><p class="text-slate-600 text-sm mt-1">${item.legalBasis}</p></div>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <div class="flex-shrink-0 pt-1"><svg class="w-6 h-6 text-primary-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg></div>
                                        <div><h5 class="font-semibold text-slate-800">Documenta√ß√£o Necess√°ria</h5><p class="text-slate-600 text-sm mt-1">${item.documentation}</p></div>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <div class="flex-shrink-0 pt-1"><svg class="w-6 h-6 text-primary-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg></div>
                                        <div><h5 class="font-semibold text-gray-800">Prazos e Responsabilidades</h5><p class="text-slate-600 text-sm mt-1">${item.deadlines}</p></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                faqContainer.appendChild(faqItem);
            });

            // Add accordion functionality after rendering
            document.querySelectorAll('.faq-item-header').forEach(header => {
                header.addEventListener('click', () => {
                    const faqItem = header.parentElement;
                    faqItem.classList.toggle('open');
                    const chevron = header.querySelector('.chevron-icon');
                    chevron.classList.toggle('rotate-180');
                });
            });
        }

        /**
         * Filters and re-renders the FAQ list based on current filter values.
         */
        function applyFilters() {
            const searchTerm = searchInput.value.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            const selectedSubtopic = subtopicFilter.value;

            const filteredData = faqData.filter(item => {
                const topicMatch = !activeTopic || item.topic === activeTopic;
                const subtopicMatch = !selectedSubtopic || item.subtopic === selectedSubtopic;
                
                const textToSearch = [
                    item.question, item.answer, item.legalBasis,
                    item.documentation, item.deadlines, item.topic, item.subtopic,
                    ...item.details.flatMap(d => [d.category, ...d.points])
                ].join(' ').toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");

                const searchMatch = !searchTerm || textToSearch.includes(searchTerm);

                return topicMatch && subtopicMatch && searchMatch;
            });

            renderFAQ(filteredData);
        }
        
        // --- Mobile Sidebar Logic ---
        function openSidebar() {
            sidebar.classList.remove('-translate-x-full');
            sidebarBackdrop.classList.remove('hidden');
        }

        function closeSidebar() {
            sidebar.classList.add('-translate-x-full');
            sidebarBackdrop.classList.add('hidden');
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            populateFiltersAndSidebar();
            renderFAQ(faqData);

            searchInput.addEventListener('input', applyFilters);
            subtopicFilter.addEventListener('change', applyFilters);

            openSidebarBtn.addEventListener('click', openSidebar);
            closeSidebarBtn.addEventListener('click', closeSidebar);
            sidebarBackdrop.addEventListener('click', closeSidebar);
        });

    </script>
</body>
</html>
